{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <div style="margin-bottom: 2rem;">
        <h1 style="margin-top: 1rem;"><span class="gradient-text">{% if object %}Edit{% else %}New{% endif %}</span>
            Technology</h1>
        <p class="text-secondary">Configure technology to track consumption and usage over time.</p>
    </div>

    <form method="post" class="card glass"
        style="padding: 2rem; border-radius: 12px; border: 1px solid rgba(0,0,0,0.05);">
        {% csrf_token %}
        <div class="form-group" style="margin-bottom: 1.25rem;">
            <label for="{{ form.name.id_for_label }}"
                style="font-weight: 600; color: var(--text-secondary); display: block; margin-bottom: 0.5rem;">Technology
                Name</label>
            {{ form.name }}
            <div style="font-size: 0.75rem; color: #dc2626; margin-top: 0.25rem;">{{ form.name.errors }}</div>
        </div>

        <div class="form-group" style="margin-bottom: 1.25rem;">
            <label for="{{ form.icon.id_for_label }}"
                style="font-weight: 600; color: var(--text-secondary); display: block; margin-bottom: 0.5rem;">Icon
                Class</label>
            {{ form.icon }}
            <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem; opacity: 0.7;">Example:
                'fas fa-server' or 'fas fa-database' (FontAwesome classes).</p>
            <div style="font-size: 0.75rem; color: #dc2626; margin-top: 0.25rem;">{{ form.icon.errors }}</div>
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label for="{{ form.max_consumption.id_for_label }}"
                style="font-weight: 600; color: var(--text-secondary); display: block; margin-bottom: 0.5rem;">Max
                Consumption</label>
            {{ form.max_consumption }}
            <p style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.25rem; opacity: 0.7;">The maximum
                capacity or consumption point.</p>
            <div style="font-size: 0.75rem; color: #dc2626; margin-top: 0.25rem;">{{ form.max_consumption.errors }}
            </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
            <button type="submit" class="btn-primary" style="flex: 1; justify-content: center;">
                {% if object %}
                Update
                {% else %}
                Create
                {% endif %} Technology
            </button>
            <a href="{% url 'technology_list' %}" class="btn-secondary"
                style="flex: 1; justify-content: center;">Cancel</a>
        </div>
    </form>

    {% if object %}
    <div style="margin-top: 2rem; text-align: center;">
        <form action="{% url 'technology_delete' object.pk %}" method="post"
            onsubmit="return confirm('Are you sure you want to delete this technology entirely? This will remove all consumption history too.')">
            {% csrf_token %}
            <button type="submit" class="btn-secondary"
                style="color: #dc2626; border-color: rgba(220, 38, 38, 0.2); background: rgba(220, 38, 38, 0.05);"><i
                    class="fas fa-trash-alt"></i> Delete Technology</button>
        </form>
    </div>
    {% endif %}
</div>

<style>
    .form-group input {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        font-family: 'Inter', sans-serif;
        font-size: 0.95rem;
        transition: border-color 0.2s, box-shadow 0.2s;
    }

    .form-group input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(143, 0, 255, 0.1);
    }
</style>
{% endblock %}