{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="header-action-row">
    <h1>AI <span class="gradient-text">Initiatives</span></h1>
    <div class="search-container" style="display: flex; align-items: center; gap: 1rem; flex-wrap: nowrap;">
        <form method="get" class="search-form"
            style="margin: 0; display: flex; flex-wrap: nowrap; align-items: center; gap: 1rem;">
            <div class="search-input-wrapper">
                <i class="fas fa-search"></i>
                <input type="text" name="q" value="{{ request.GET.q|default:'' }}" placeholder="Search initiatives..."
                    hx-get="{% url 'initiative_list' %}" hx-trigger="keyup changed delay:300ms, search"
                    hx-target="#initiative-container" hx-push-url="true">
            </div>
            <div style="display: flex; gap: 0.5rem; align-items: center;">
                <button type="submit" class="btn-primary">Filter</button>
                {% if request.GET.q %}
                <a href="{% url 'initiative_list' %}" class="btn-secondary" title="Clear Search">
                    <i class="fas fa-times-circle"></i>
                </a>
                {% endif %}
            </div>
        </form>
        {% include 'initiatives/partials/mini_pagination.html' %}
    </div>
</div>

<div id="initiative-container">
    {% include 'initiatives/partials/initiative_table.html' %}
</div>
<style>
    @media (max-width: 768px) {
        .mini-pagination {
            display: none !important;
        }
    }

    .main-pagination .page-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.2s ease;
        font-size: 0.85rem;
    }

    .main-pagination .page-btn:not(.disabled):hover {
        background: var(--primary-color, #007aff);
        color: white;
    }

    .main-pagination .page-btn.disabled {
        opacity: 0.3;
        cursor: not-allowed;
    }

    .main-pagination .page-indicator {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-primary);
        padding: 0 1rem;
    }
</style>

<style>
    .table-action-btn {
        color: black;
    }

    .table-action-btn:hover {
        color: white !important;
    }

    .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        flex-shrink: 0;
    }

    .dot-live {
        background-color: #22c55e;
        box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
    }

    .dot-pilot {
        background-color: #eab308;
        box-shadow: 0 0 8px rgba(234, 179, 8, 0.4);
    }

    .dot-in-progress {
        background-color: #3b82f6;
        box-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
    }

    .dot-planning {
        background-color: #94a3b8;
        box-shadow: 0 0 8px rgba(148, 163, 184, 0.4);
    }

    .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
    }
</style>
{% endblock %}